<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Instagram oEmbed Test</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>
  <body>
    <h2>Instagram oEmbed Test</h2>
    <p>
      This page loads a public Instagram post using the Meta oEmbed endpoint via
      a server-side proxy.
    </p>

    <div id="embed">Loading...</div>

    <script>
      const PUBLIC_POST_URL = "https://www.instagram.com/p/DR7ACEHiP-w";

      fetch("/api/oembed?url=" + encodeURIComponent(PUBLIC_POST_URL))
        .then((res) => res.json())
        .then((data) => {
          if (data.html) {
            document.getElementById("embed").innerHTML = data.html;
          } else {
            document.getElementById("embed").innerHTML =
              "Error: " + (data.error?.message || JSON.stringify(data));
          }
        })
        .catch((err) => {
          document.getElementById("embed").innerHTML =
            "Request failed: " + err.message;
        });
    </script>
  </body>
</html>
